# Chapter 7: The Capstone - Conversational Robot

This capstone project brings together all the concepts learned in the "Teaching Physical AI & Humanoid Robotics Course" to build a conversational robot. The goal is to create an embodied AI that can understand natural language, process information, and perform actions in a physical or simulated environment.

## 1. Conversational Robot Architecture

The core architecture for our conversational robot will follow a modular design, enabling clear separation of concerns and integration of state-of-the-art AI and robotics technologies.

### Architecture Overview: User Speaks -> Whisper (STT) -> GPT-4o (Brain) -> ROS 2 (Action)

1.  **User Speaks (Input)**: The interaction begins with the user's spoken commands or questions.
2.  **Whisper (Speech-to-Text - STT)**: NVIDIA Whisper, or a similar robust speech-to-text model, will transcribe the user's spoken input into text. This ensures accurate conversion of audio into a format suitable for the LLM.
3.  **GPT-4o (Brain - Natural Language Understanding & Decision Making)**: The transcribed text is then fed into a large language model like GPT-4o. This model acts as the robot's "brain," performing:
    *   **Natural Language Understanding (NLU)**: Interpreting the intent and entities from the user's query.
    *   **Cognitive Processing**: Generating responses, making decisions, and planning actions based on its understanding and contextual awareness.
    *   **Action Command Generation**: Translating high-level intentions into specific, structured commands that can be executed by the robot's control system.
4.  **ROS 2 (Robot Operating System 2 - Action Execution)**: The structured commands generated by GPT-4o are then interfaced with ROS 2. ROS 2 nodes will be responsible for:
    *   **Perception**: Utilizing sensor data (cameras, LIDAR, IMUs) to understand the environment.
    *   **Navigation**: Planning and executing movements to reach target locations.
    *   **Manipulation**: Controlling robotic arms and grippers to interact with objects.
    *   **Speech Synthesis (TTS)**: Converting the robot's textual responses from GPT-4o back into spoken language to respond to the user.

## 2. Project Guide for Students: Building Your Conversational Robot

This guide provides a roadmap for students to develop their own conversational robot.

### Phase 1: Setup and Core Components

1.  **ROS 2 Environment Setup**:
    *   Install Ubuntu 22.04 LTS on your Digital Twin Workstation (RTX 4070 Ti+ GPU, Intel i7 13th Gen+ CPU, 64 GB RAM).
    *   Install ROS 2 Humble/Iron.
    *   Set up your NVIDIA Jetson Orin Nano (8GB) Edge Kit with necessary ROS 2 packages.
2.  **Speech-to-Text Integration (Whisper)**:
    *   Explore available ROS 2 packages for speech recognition (e.g., integrating an on-device Whisper model or a cloud-based API).
    *   Connect your ReSpeaker USB Mic Array v2.0 to your Jetson or workstation.
    *   Develop a ROS 2 node to capture audio, process it with Whisper, and publish the transcribed text to a ROS topic.
3.  **LLM Integration (GPT-4o)**:
    *   Set up API access for GPT-4o.
    *   Develop a ROS 2 node that subscribes to the transcribed text topic, sends it to GPT-4o, and receives the response.
    *   Design the prompt engineering for GPT-4o to ensure it generates actionable commands and relevant conversational responses.
    *   Consider tools like Function Calling to allow GPT-4o to directly invoke robot actions.
4.  **Text-to-Speech Integration**:
    *   Integrate a text-to-speech (TTS) engine (e.g., Google Text-to-Speech, MaryTTS, or a local model) to convert GPT-4o's textual responses into spoken feedback for the user.
    *   Develop a ROS 2 node to publish audio commands to your speaker.

### Phase 2: Embodiment and Action

1.  **Robot Simulation (Gazebo/Isaac Sim)**:
    *   Load your chosen robot's URDF/SDF model into Gazebo or NVIDIA Isaac Sim.
    *   Familiarize yourself with simulating its sensors (Intel RealSense D435i/D455 for RGB-D, LIDAR).
    *   Develop basic ROS 2 control nodes for the robot's movement (e.g., simple locomotion, joint control).
2.  **Action Mapping (GPT-4o to ROS 2)**:
    *   Define a clear mapping between GPT-4o's generated commands and ROS 2 actions (e.g., "move forward" -> `/cmd_vel` topic, "pick up object" -> sequence of manipulation actions).
    *   Implement ROS 2 action servers/clients for complex tasks like navigation and manipulation.
3.  **Interaction Design**:
    *   Focus on natural human-robot interaction.
    *   Implement safeguards and error handling for ambiguous or impossible commands.
    *   Consider multi-modal feedback beyond speech, such as visual cues in the simulation or on the physical robot.

### Phase 3: Testing, Refinement, and Physical Deployment

1.  **Unit and Integration Testing**:
    *   Rigorously test each component (STT, LLM, TTS, ROS 2 control) independently and in integrated workflows.
    *   Use ROS 2 launch files to manage complex system startups for testing.
2.  **Sim-to-Real Transfer**:
    *   If using a physical robot (Unitree Go2 Edu, Hiwonder TonyPi Pro, etc.), transfer your tested ROS 2 nodes from simulation to the Jetson Orin Nano.
    *   Address any discrepancies or challenges that arise from the sim-to-real gap.
3.  **User Trials & Iteration**:
    *   Conduct user trials to gather feedback on the robot's conversational abilities and task performance.
    *   Iterate on prompt engineering for GPT-4o and refine ROS 2 action mappings based on user feedback.

## 3. Final CAARE Program Capstone Presentation Rubric

The final presentation for your conversational robot capstone will be evaluated on the following criteria:

| Category                     | Description                                                                                                                                                                                                                                                                         | Weighting |
| :--------------------------- | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :-------- |
| **I. Problem Definition & Goals** | Clearly articulate the problem your conversational robot addresses. Define the specific goals and objectives of your capstone project, including what constitutes success.                                                                                                                | 15%       |
| **II. Architecture Design**  | Present a comprehensive overview of your robot's architecture (User -> Whisper -> GPT-4o -> ROS 2). Justify key architectural choices, including the selection of specific AI models (STT, LLM, TTS) and their integration with ROS 2 for perception and action.                       | 20%       |
| **III. Implementation & Development** | Demonstrate the core functionality of your conversational robot. Show evidence of robust implementation, including code structure, use of ROS 2 concepts (nodes, topics, services, actions), and integration of AI components. Highlight any novel solutions or challenges overcome. | 25%       |
| **IV. Demonstration & Performance** | Conduct a live demonstration (simulated or physical) of your conversational robot. Showcase its ability to understand commands, engage in conversation, and perform actions. Discuss performance metrics, error handling, and reliability.                                   | 20%       |
| **V. Future Work & Impact**  | Discuss potential future enhancements, extensions, or improvements to your robot. Articulate the broader impact and implications of your work within the field of Physical AI and humanoid robotics.                                                                           | 10%       |
| **VI. Presentation Clarity & Engagement** | Present your work clearly, concisely, and engagingly. Effectively answer questions from the audience, demonstrating a deep understanding of your project.                                                                                                              | 10%       |
| **Total**                    |                                                                                                                                                                                                                                                                                     | **100%**  |
